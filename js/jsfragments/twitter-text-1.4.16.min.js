/*!
 * twitter-text-js 1.4.16
 *
 * Copyright 2011 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this work except in compliance with the License.
 * You may obtain a copy of the License at:
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 */
if(typeof window=="undefined"||window===null)window={twttr:{}};window.twttr==null&&(window.twttr={});if(typeof twttr=="undefined"||twttr===null)twttr={};(function(){function b(a,b){return b=b||"",typeof a!="string"&&(a.global&&b.indexOf("g")<0&&(b+="g"),a.ignoreCase&&b.indexOf("i")<0&&(b+="i"),a.multiline&&b.indexOf("m")<0&&(b+="m"),a=a.source),new RegExp(a.replace(/#\{(\w+)\}/g,function(a,b){var c=twttr.txt.regexen[b]||"";return typeof c!="string"&&(c=c.source),c}),b)}function c(a,b){return a.replace(/#\{(\w+)\}/g,function(a,c){return b[c]||""})}function d(a,b,c){var d=String.fromCharCode(b);return c!==b&&(d+="-"+String.fromCharCode(c)),a.push(d),a}function o(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function s(a,b,c){return c?!a||a.match(b)&&RegExp["$&"]===a:typeof a=="string"&&a.match(b)&&RegExp["$&"]===a}twttr.txt={},twttr.txt.regexen={};var a={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"};twttr.txt.htmlEscape=function(b){return b&&b.replace(/[&"'><]/g,function(b){return a[b]})};var e=String.fromCharCode,f=[e(32),e(133),e(160),e(5760),e(6158),e(8232),e(8233),e(8239),e(8287),e(12288)];d(f,9,13),d(f,8192,8202);var g=[e(65534),e(65279),e(65535)];d(g,8234,8238),twttr.txt.regexen.spaces_group=b(f.join("")),twttr.txt.regexen.spaces=b("["+f.join("")+"]"),twttr.txt.regexen.invalid_chars_group=b(g.join("")),twttr.txt.regexen.punct=/\!'#%&'\(\)*\+,\\\-\.\/:;<=>\?@\[\]\^_{|}~\$/,twttr.txt.regexen.atSigns=/[@＠]/,twttr.txt.regexen.extractMentions=b(/(^|[^a-zA-Z0-9_!#$%&*@＠])(#{atSigns})([a-zA-Z0-9_]{1,20})/g),twttr.txt.regexen.extractReply=b(/^(?:#{spaces})*#{atSigns}([a-zA-Z0-9_]{1,20})/),twttr.txt.regexen.listName=/[a-zA-Z][a-zA-Z0-9_\-\u0080-\u00ff]{0,24}/,twttr.txt.regexen.extractMentionsOrLists=b(/(^|[^a-zA-Z0-9_!#$%&*@＠])(#{atSigns})([a-zA-Z0-9_]{1,20})(\/[a-zA-Z][a-zA-Z0-9_\-]{0,24})?/g);var h=[];d(h,1024,1279),d(h,1280,1319),d(h,11744,11775),d(h,42560,42655),d(h,1425,1469),d(h,1471,1471),d(h,1473,1474),d(h,1476,1477),d(h,1479,1479),d(h,1488,1514),d(h,1520,1522),d(h,64274,64296),d(h,64298,64310),d(h,64312,64316),d(h,64318,64318),d(h,64320,64321),d(h,64323,64324),d(h,64326,64335),d(h,1552,1562),d(h,1568,1631),d(h,1646,1747),d(h,1749,1756),d(h,1758,1768),d(h,1770,1775),d(h,1786,1788),d(h,1791,1791),d(h,1872,1919),d(h,2208,2208),d(h,2210,2220),d(h,2276,2302),d(h,64336,64433),d(h,64467,64829),d(h,64848,64911),d(h,64914,64967),d(h,65008,65019),d(h,65136,65140),d(h,65142,65276),d(h,8204,8204),d(h,3585,3642),d(h,3648,3662),d(h,4352,4607),d(h,12592,12677),d(h,43360,43391),d(h,44032,55215),d(h,55216,55295),d(h,65441,65500),d(h,12449,12538),d(h,12540,12542),d(h,65382,65439),d(h,65392,65392),d(h,65296,65305),d(h,65313,65338),d(h,65345,65370),d(h,12353,12438),d(h,12441,12446),d(h,13312,19903),d(h,19968,40959),d(h,173824,177983),d(h,177984,178207),d(h,194560,195103),d(h,12291,12291),d(h,12293,12293),d(h,12347,12347),twttr.txt.regexen.nonLatinHashtagChars=b(h.join(""));var i=[];d(i,192,214),d(i,216,246),d(i,248,255),d(i,256,591),d(i,595,596),d(i,598,599),d(i,601,601),d(i,603,603),d(i,611,611),d(i,616,616),d(i,623,623),d(i,626,626),d(i,649,649),d(i,651,651),d(i,699,699),d(i,7680,7935),twttr.txt.regexen.latinAccentChars=b(i.join("")),twttr.txt.regexen.endScreenNameMatch=b(/^(?:#{atSigns}|[#{latinAccentChars}]|:\/\/)/),twttr.txt.regexen.hashtagAlpha=b(/[a-z_#{latinAccentChars}#{nonLatinHashtagChars}]/i),twttr.txt.regexen.hashtagAlphaNumeric=b(/[a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}]/i),twttr.txt.regexen.endHashtagMatch=/^(?:[#＃]|:\/\/)/,twttr.txt.regexen.hashtagBoundary=b(/(?:^|$|[^&\/a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}])/),twttr.txt.regexen.autoLinkHashtags=b(/(#{hashtagBoundary})(#|＃)(#{hashtagAlphaNumeric}*#{hashtagAlpha}#{hashtagAlphaNumeric}*)/gi),twttr.txt.regexen.autoLinkUsernamesOrLists=/(^|[^a-zA-Z0-9_!#\$%&*@＠]|RT:?)([@＠]+)([a-zA-Z0-9_]{1,20})(\/[a-zA-Z][a-zA-Z0-9_\-]{0,24})?/g,twttr.txt.regexen.autoLinkEmoticon=/(8\-\#|8\-E|\+\-\(|\`\@|\`O|\&lt;\|:~\(|\}:o\{|:\-\[|\&gt;o\&lt;|X\-\/|\[:-\]\-I\-|\/\/\/\/Ö\\\\\\\\|\(\|:\|\/\)|∑:\*\)|\( \| \))/g,twttr.txt.regexen.validPrecedingChars=b(/(?:[^-\/"'!=A-Za-z0-9_@＠$#＃\.#{invalid_chars_group}]|^)/),twttr.txt.regexen.invalidDomainChars=c("#{punct}#{spaces_group}#{invalid_chars_group}",twttr.txt.regexen),twttr.txt.regexen.validDomainChars=b(/[^#{invalidDomainChars}]/),twttr.txt.regexen.validSubdomain=b(/(?:(?:#{validDomainChars}(?:[_-]|#{validDomainChars})*)?#{validDomainChars}\.)/),twttr.txt.regexen.validDomainName=b(/(?:(?:#{validDomainChars}(?:-|#{validDomainChars})*)?#{validDomainChars}\.)/),twttr.txt.regexen.validGTLD=b(/(?:(?:aero|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel|xxx)(?=[^a-zA-Z]|$))/),twttr.txt.regexen.validCCTLD=b(/(?:(?:ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw)(?=[^a-zA-Z]|$))/),twttr.txt.regexen.validPunycode=b(/(?:xn--[0-9a-z]+)/),twttr.txt.regexen.validDomain=b(/(?:#{validSubdomain}*#{validDomainName}(?:#{validGTLD}|#{validCCTLD}|#{validPunycode}))/),twttr.txt.regexen.validAsciiDomain=b(/(?:(?:[a-z0-9#{latinAccentChars}]+)\.)+(?:#{validGTLD}|#{validCCTLD}|#{validPunycode})/gi),twttr.txt.regexen.invalidShortDomain=b(/^#{validDomainName}#{validCCTLD}$/),twttr.txt.regexen.validPortNumber=b(/[0-9]+/),twttr.txt.regexen.validGeneralUrlPathChars=b(/[a-z0-9!\*';:=\+,\.\$\/%#\[\]\-_~|&#{latinAccentChars}]/i),twttr.txt.regexen.validUrlBalancedParens=b(/\(#{validGeneralUrlPathChars}+\)/i),twttr.txt.regexen.validUrlPathEndingChars=b(/[\+\-a-z0-9=_#\/#{latinAccentChars}]|(?:#{validUrlBalancedParens})/i),twttr.txt.regexen.validUrlPath=b("(?:(?:#{validGeneralUrlPathChars}*(?:#{validUrlBalancedParens}#{validGeneralUrlPathChars}*)*#{validUrlPathEndingChars})|(?:@#{validGeneralUrlPathChars}+/))","i"),twttr.txt.regexen.validUrlQueryChars=/[a-z0-9!?\*'\(\);:&=\+\$\/%#\[\]\-_\.,~|]/i,twttr.txt.regexen.validUrlQueryEndingChars=/[a-z0-9_&=#\/]/i,twttr.txt.regexen.extractUrl=b("((#{validPrecedingChars})((https?:\\/\\/)?(#{validDomain})(?::(#{validPortNumber}))?(\\/#{validUrlPath}*)?(\\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?))","gi"),twttr.txt.regexen.validTcoUrl=/^https?:\/\/t\.co\/[a-z0-9]+/i,twttr.txt.regexen.validateUrlUnreserved=/[a-z0-9\-._~]/i,twttr.txt.regexen.validateUrlPctEncoded=/(?:%[0-9a-f]{2})/i,twttr.txt.regexen.validateUrlSubDelims=/[!$&'()*+,;=]/i,twttr.txt.regexen.validateUrlPchar=b("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|[:|@])","i"),twttr.txt.regexen.validateUrlScheme=/(?:[a-z][a-z0-9+\-.]*)/i,twttr.txt.regexen.validateUrlUserinfo=b("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|:)*","i"),twttr.txt.regexen.validateUrlDecOctet=/(?:[0-9]|(?:[1-9][0-9])|(?:1[0-9]{2})|(?:2[0-4][0-9])|(?:25[0-5]))/i,twttr.txt.regexen.validateUrlIpv4=b(/(?:#{validateUrlDecOctet}(?:\.#{validateUrlDecOctet}){3})/i),twttr.txt.regexen.validateUrlIpv6=/(?:\[[a-f0-9:\.]+\])/i,twttr.txt.regexen.validateUrlIp=b("(?:#{validateUrlIpv4}|#{validateUrlIpv6})","i"),twttr.txt.regexen.validateUrlSubDomainSegment=/(?:[a-z0-9](?:[a-z0-9_\-]*[a-z0-9])?)/i,twttr.txt.regexen.validateUrlDomainSegment=/(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?)/i,twttr.txt.regexen.validateUrlDomainTld=/(?:[a-z](?:[a-z0-9\-]*[a-z0-9])?)/i,twttr.txt.regexen.validateUrlDomain=b(/(?:(?:#{validateUrlSubDomainSegment]}\.)*(?:#{validateUrlDomainSegment]}\.)#{validateUrlDomainTld})/i),twttr.txt.regexen.validateUrlHost=b("(?:#{validateUrlIp}|#{validateUrlDomain})","i"),twttr.txt.regexen.validateUrlUnicodeSubDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9_\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,twttr.txt.regexen.validateUrlUnicodeDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,twttr.txt.regexen.validateUrlUnicodeDomainTld=/(?:(?:[a-z]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,twttr.txt.regexen.validateUrlUnicodeDomain=b(/(?:(?:#{validateUrlUnicodeSubDomainSegment}\.)*(?:#{validateUrlUnicodeDomainSegment}\.)#{validateUrlUnicodeDomainTld})/i),twttr.txt.regexen.validateUrlUnicodeHost=b("(?:#{validateUrlIp}|#{validateUrlUnicodeDomain})","i"),twttr.txt.regexen.validateUrlPort=/[0-9]{1,5}/,twttr.txt.regexen.validateUrlUnicodeAuthority=b("(?:(#{validateUrlUserinfo})@)?(#{validateUrlUnicodeHost})(?::(#{validateUrlPort}))?","i"),twttr.txt.regexen.validateUrlAuthority=b("(?:(#{validateUrlUserinfo})@)?(#{validateUrlHost})(?::(#{validateUrlPort}))?","i"),twttr.txt.regexen.validateUrlPath=b(/(\/#{validateUrlPchar}*)*/i),twttr.txt.regexen.validateUrlQuery=b(/(#{validateUrlPchar}|\/|\?)*/i),twttr.txt.regexen.validateUrlFragment=b(/(#{validateUrlPchar}|\/|\?)*/i),twttr.txt.regexen.validateUrlUnencoded=b("^(?:([^:/?#]+):\\/\\/)?([^/?#]*)([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$","i");var j="tweet-url",k="list-slug",l="username",m="hashtag",n=' rel="nofollow"';twttr.txt.autoLink=function(a,b){return b=o(b||{}),twttr.txt.autoLinkUsernamesOrLists(twttr.txt.autoLinkUrlsCustom(twttr.txt.autoLinkHashtags(a,b),b),b)},twttr.txt.autoLinkUsernamesOrLists=function(a,b){b=o(b||{}),b.urlClass=b.urlClass||j,b.listClass=b.listClass||k,b.usernameClass=b.usernameClass||l,b.usernameUrlBase=b.usernameUrlBase||"https://twitter.com/",b.listUrlBase=b.listUrlBase||"https://twitter.com/";if(!b.suppressNoFollow)var d=n;var e="",f=twttr.txt.splitTags(a);for(var g=0;g<f.length;g++){var h=f[g];g!==0&&(e+=g%2===0?">":"<"),g%4!==0?e+=h:e+=h.replace(twttr.txt.regexen.autoLinkUsernamesOrLists,function(a,e,f,g,h,i,j){var k=j.slice(i+a.length),l={before:e,at:b.usernameIncludeSymbol?"":f,at_before_user:b.usernameIncludeSymbol?f:"",user:twttr.txt.htmlEscape(g),slashListname:twttr.txt.htmlEscape(h),extraHtml:d,preChunk:"",postChunk:""};for(var m in b)b.hasOwnProperty(m)&&(l[m]=b[m]);if(h&&!b.suppressLists){var n=l.chunk=c("#{user}#{slashListname}",l);return l.list=twttr.txt.htmlEscape(n.toLowerCase()),c('#{before}#{at}<a class="#{urlClass} #{listClass}" href="#{listUrlBase}#{list}"#{extraHtml}>#{preChunk}#{at_before_user}#{chunk}#{postChunk}</a>',l)}return k&&k.match(twttr.txt.regexen.endScreenNameMatch)?a:(l.chunk=l.user,l.dataScreenName=b.suppressDataScreenName?"":c('data-screen-name="#{chunk}" ',l),c('#{before}#{at}<a class="#{urlClass} #{usernameClass}" #{dataScreenName}href="#{usernameUrlBase}#{chunk}"#{extraHtml}>#{preChunk}#{at_before_user}#{chunk}#{postChunk}</a>',l))})}return e},twttr.txt.autoLinkHashtags=function(a,b){b=o(b||{}),b.urlClass=b.urlClass||j,b.hashtagClass=b.hashtagClass||m,b.hashtagUrlBase=b.hashtagUrlBase||"https://twitter.com/#!/search?q=%23";if(!b.suppressNoFollow)var d=n;return a.replace(twttr.txt.regexen.autoLinkHashtags,function(a,e,f,g,h,i){var j=i.slice(h+a.length);if(j.match(twttr.txt.regexen.endHashtagMatch))return a;var k={before:e,hash:twttr.txt.htmlEscape(f),preText:"",text:twttr.txt.htmlEscape(g),postText:"",extraHtml:d};for(var l in b)b.hasOwnProperty(l)&&(k[l]=b[l]);return c('#{before}<a href="#{hashtagUrlBase}#{text}" title="##{text}" class="#{urlClass} #{hashtagClass}"#{extraHtml}>#{hash}#{preText}#{text}#{postText}</a>',k)})},twttr.txt.autoLinkUrlsCustom=function(a,b){b=o(b||{}),b.suppressNoFollow||(b.rel="nofollow"),b.urlClass&&(b["class"]=b.urlClass,delete b.urlClass);var d,e,f;if(b.urlEntities){d={};for(e=0,f=b.urlEntities.length;e<f;e++)d[b.urlEntities[e].url]=b.urlEntities[e]}return delete b.suppressNoFollow,delete b.suppressDataScreenName,delete b.listClass,delete b.usernameClass,delete b.usernameUrlBase,delete b.listUrlBase,delete b.urlEntities,a.replace(twttr.txt.regexen.extractUrl,function(a,e,f,g,h,i,j,k,l){var m;if(h){var n="",o="";g.match(twttr.txt.regexen.validTcoUrl)&&(g=RegExp.lastMatch,o=RegExp.rightContext);var p=g,q=twttr.txt.htmlEscape(p);if(d&&d[g]&&d[g].display_url){var p=d[g].display_url,r=d[g].expanded_url;b.title||(b.title=r);var s=p.replace(/…/g,"");if(r.indexOf(s)!=-1){var t=r.indexOf(s),u={displayUrlSansEllipses:s,beforeDisplayUrl:r.substr(0,t),afterDisplayUrl:r.substr(t+s.length),precedingEllipsis:p.match(/^…/)?"…":"",followingEllipsis:p.match(/…$/)?"…":""};$.each(u,function(a,b){u[a]=twttr.txt.htmlEscape(b)}),u.invisible="style='font-size:0; line-height:0'",q=c("<span class='tco-ellipsis'>#{precedingEllipsis}<span #{invisible}>&nbsp;</span></span><span #{invisible}>#{beforeDisplayUrl}</span><span class='js-display-url'>#{displayUrlSansEllipses}</span><span #{invisible}>#{afterDisplayUrl}</span><span class='tco-ellipsis'><span #{invisible}>&nbsp;</span>#{followingEllipsis}</span>",u)}}for(var v in b){var w=b[v].toString();n+=c(' #{k}="#{val}" ',{k:v,val:twttr.txt.htmlEscape(w)})}var x={before:f,htmlAttrs:n,url:twttr.txt.htmlEscape(g),linkText:q,after:o};return c('#{before}<a href="#{url}"#{htmlAttrs}>#{linkText}</a>#{after}',x)}return e})},twttr.txt.extractMentions=function(a){var b=[],c=twttr.txt.extractMentionsWithIndices(a);for(var d=0;d<c.length;d++){var e=c[d].screenName;b.push(e)}return b},twttr.txt.extractMentionsWithIndices=function(a){if(!a)return[];var b=[],c=0;return a.replace(twttr.txt.regexen.extractMentions,function(d,e,f,g,h,i){var j=i.slice(h+d.length);if(!j.match(twttr.txt.regexen.endScreenNameMatch)){var k=a.indexOf(f+g,c);c=k+g.length+1,b.push({screenName:g,indices:[k,c]})}}),b},twttr.txt.extractMentionsOrListsWithIndices=function(a){if(!a)return[];var b=[],c=0;return a.replace(twttr.txt.regexen.extractMentionsOrLists,function(d,e,f,g,h,i,j){var k=j.slice(i+d.length);if(!k.match(twttr.txt.regexen.endScreenNameMatch)){h=h||"";var l=a.indexOf(f+g+h,c);c=l+g.length+h.length+1,b.push({screenName:g,listSlug:h,indices:[l,c]})}}),b},twttr.txt.extractReplies=function(a){if(!a)return null;var b=a.match(twttr.txt.regexen.extractReply);return!b||RegExp.rightContext.match(twttr.txt.regexen.endScreenNameMatch)?null:b[1]},twttr.txt.extractUrls=function(a){var b=[],c=twttr.txt.extractUrlsWithIndices(a);for(var d=0;d<c.length;d++)b.push(c[d].url);return b},twttr.txt.extractUrlsWithIndices=function(a){if(!a)return[];var b=[];while(twttr.txt.regexen.extractUrl.exec(a)){var c=RegExp.$2,d=RegExp.$3,e=RegExp.$4,f=RegExp.$5,g=RegExp.$7,h=twttr.txt.regexen.extractUrl.lastIndex,i=h-d.length;if(!e){var j=null,k=!1,l=0;f.replace(twttr.txt.regexen.validAsciiDomain,function(a){var c=f.indexOf(a,l);l=c+a.length,j={url:a,indices:[i+c,i+l]},k=a.match(twttr.txt.regexen.invalidShortDomain),k||b.push(j)});if(j==null)continue;g&&(k&&b.push(j),j.url=d.replace(f,j.url),j.indices[1]=h)}else d.match(twttr.txt.regexen.validTcoUrl)&&(d=RegExp.lastMatch,h=i+d.length),b.push({url:d,indices:[i,h]})}return b},twttr.txt.extractHashtags=function(a){var b=[],c=twttr.txt.extractHashtagsWithIndices(a);for(var d=0;d<c.length;d++)b.push(c[d].hashtag);return b},twttr.txt.extractHashtagsWithIndices=function(a){if(!a)return[];var b=[],c=0;return a.replace(twttr.txt.regexen.autoLinkHashtags,function(d,e,f,g,h,i){var j=i.slice(h+d.length);if(j.match(twttr.txt.regexen.endHashtagMatch))return;var k=a.indexOf(f+g,c);c=k+g.length+1,b.push({hashtag:g,indices:[k,c]})}),b},twttr.txt.modifyIndicesFromUnicodeToUTF16=function(a,b){twttr.txt.convertUnicodeIndices(a,b,!1)},twttr.txt.modifyIndicesFromUTF16ToUnicode=function(a,b){twttr.txt.convertUnicodeIndices(a,b,!0)},twttr.txt.convertUnicodeIndices=function(a,b,c){if(b.length==0)return;var d=0,e=0;b.sort(function(a,b){return a.indices[0]-b.indices[0]});var f=0,g=b[0];while(d<a.length){if(g.indices[0]==(c?d:e)){var h=g.indices[1]-g.indices[0];g.indices[0]=c?e:d,g.indices[1]=g.indices[0]+h,f++;if(f==b.length)break;g=b[f]}var i=a.charCodeAt(d);55296<=i&&i<=56319&&d<a.length-1&&(i=a.charCodeAt(d+1),56320<=i&&i<=57343&&d++),e++,d++}},twttr.txt.splitTags=function(a){var b=a.split("<"),c,d=[],e;for(var f=0;f<b.length;f+=1){e=b[f];if(!e)d.push("");else{c=e.split(">");for(var g=0;g<c.length;g+=1)d.push(c[g])}}return d},twttr.txt.hitHighlight=function(a,b,c){var d="em";b=b||[],c=c||{};if(b.length===0)return a;var e=c.tag||d,f=["<"+e+">","</"+e+">"],g=twttr.txt.splitTags(a),h,i,j,k="",l=0,m=g[0],n=0,o=0,p=!1,q=m,r=[],s,t,u,v,w;for(i=0;i<b.length;i+=1)for(j=0;j<b[i].length;j+=1)r.push(b[i][j]);for(s=0;s<r.length;s+=1){t=r[s],u=f[s%2],v=!1;while(m!=null&&t>=n+m.length)k+=q.slice(o),p&&t===n+q.length&&(k+=u,v=!0),g[l+1]&&(k+="<"+g[l+1]+">"),n+=q.length,o=0,l+=2,m=g[l],q=m,p=!1;!v&&m!=null?(w=t-n,k+=q.slice(o,w)+u,o=w,s%2===0?p=!0:p=!1):v||(v=!0,k+=u)}if(m!=null){o<q.length&&(k+=q.slice(o));for(s=l+1;s<g.length;s+=1)k+=s%2===0?g[s]:"<"+g[s]+">"}return k};var p=140,q=[e(65534),e(65279),e(65535),e(8234),e(8235),e(8236),e(8237),e(8238)];twttr.txt.isInvalidTweet=function(a){if(!a)return"empty";if(a.length>p)return"too_long";for(var b=0;b<q.length;b++)if(a.indexOf(q[b])>=0)return"invalid_characters";return!1},twttr.txt.isValidTweetText=function(a){return!twttr.txt.isInvalidTweet(a)},twttr.txt.isValidUsername=function(a){if(!a)return!1;var b=twttr.txt.extractMentions(a);return b.length===1&&b[0]===a.slice(1)};var r=b(/^#{autoLinkUsernamesOrLists}$/);twttr.txt.isValidList=function(a){var b=a.match(r);return!!b&&b[1]==""&&!!b[4]},twttr.txt.isValidHashtag=function(a){if(!a)return!1;var b=twttr.txt.extractHashtags(a);return b.length===1&&b[0]===a.slice(1)},twttr.txt.isValidUrl=function(a,b,c){b==null&&(b=!0),c==null&&(c=!0);if(!a)return!1;var d=a.match(twttr.txt.regexen.validateUrlUnencoded);if(!d||d[0]!==a)return!1;var e=d[1],f=d[2],g=d[3],h=d[4],i=d[5];return(!c||s(e,twttr.txt.regexen.validateUrlScheme)&&e.match(/^https?$/i))&&s(g,twttr.txt.regexen.validateUrlPath)&&s(h,twttr.txt.regexen.validateUrlQuery,!0)&&s(i,twttr.txt.regexen.validateUrlFragment,!0)?b&&s(f,twttr.txt.regexen.validateUrlUnicodeAuthority)||!b&&s(f,twttr.txt.regexen.validateUrlAuthority):!1},typeof module!="undefined"&&module.exports&&(module.exports=twttr.txt)})();
